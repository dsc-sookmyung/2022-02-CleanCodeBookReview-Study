# 클린코드

## 4. 주석

- 잘 달린 주석은 아주 유용하다
- 그러나 오래되고 조잡한 주석은 거짓과 잘못된 정보다 - 해악! **없는게 낫다**
  - 주석은 오래될수록 코드에서 멀어진다
  - 프로그래머들이 주석을 유지, 보수하기 어렵기 떄문이다
- 프로그래밍 언어를 이용해 의도를 표현할 능력이 있으면 주석은 필요하지 않다
  - 오직 코드만이 정확한 정보를 제공한다
- 따라서 주석을 줄일 수 있도록 꾸준히 노력하자

1. 주석은 나쁜 코드를 보완하지 못한다.

- 코드에 주석을 추가하는 이유 : 코드 품질이 나쁘기 때문에

2. 코드로 의도를 표현하라

- 몇 초만 더 생각하면 코드로 대다수 의도를 표현할 수 있다.

3. 좋은 주석

   1. 법적인 주석

      - 회사가 정립한 구현 표준에 맞춰 법적인 이유로 특정 주석을 명시
      - 저작권 정보, 소유권 정보

   2. 정보를 제공하는 주석

      - 기본적인 정보를 주석으로 제공하면 편리하다
      - 그렇더라도 코드(변수명, 함수 이름)에 정보를 담는 편이 더 좋다

   3. 의도를 설명하는 주석

      - 결정에 깔린 의도를 설명하는 주석

   4. 의미를 명료하게 밝히는 주석

      - 모호한 인수나 반환값은 의미를 읽기 좋게 주석으로 표현하면 코드가 이해하기 쉬워진다
      - 표준 라이브러리 or 변경하지 못하는 코드에 속한다면 의미를 명료하게 밝히는 주석이 유용함

   5. 결과를 경고하는 주석

      - 다른 프로그래머에게 결과를 경고하는 목적으로 사용하는 주석

   6. TODO 주석

      - 앞으로 해야 할 일을 `//TODO` 주석으로 남겨두면 편함
      - 필요하다 여기지만 당장 구현하기 어려운 업무 기술
        - 그러나 시스템에 나쁜 코드를 남겨놓는 핑계가 되진 말자
      - 요즘 대다수의 IDE는 TODO를 찾아주는 기능을 제공한다

   7. 중요성을 강조하는 주석

   8. 공개 API의 Javadocs

      - 설명이 잘 된 공개 API는 아주 좋다
      - 공개 API를 구현한다면 반드시 훌륭한 Javadocs를 작성한다.

4. 나쁜 주석
   - 대다수의 주석이 이 범주에 속한다
   1. 주절거리는 주석
      - 주석을 달기로 결정했다면 충분한 시간을 들여서 최고의 주석을 달 수 있도록 노력해보자
      - 이해가 안 되어 다른 모듈까지 뒤져야 하는 주석은 독자와 제대로 소통하지 못하는 주석이다
   2. 같은 이야기를 중복하는 주석
      - 헤더에 달린 주석이 코드 내용을 그래도 중복하면, 코드보다 주석을 읽는 시간이 더 오래 걸린다.
   3. 오해할 여지가 있는 주석
      - 오해의 여지가 있는 '살짝 잘못된 정보'로 다른 프로그래머들이 골머리를 앓을 수도 있다
   4. 의무적으로 다는 주석
      - 모든 함수, 모든 변수에 주석을 달아야 한다는 규칙은 어리석다
      - 코드가 복잡해지고, 거짓말을 퍼뜨리고, 혼동과 무질서를 초래한다.
   5. 이력을 기록하는 주석
      - 소스 코드 관리 시스템이 없던 때에는 바람직했다.
      - 이제는 완전히 제거하는 편이 좋다
   6. 있으나 마나 한 주석
      - 너무 당연한 사실을 언급하는 주석
      - 쓸모 없는 주석 (`이게 뭐야!`)
      - 개발자가 주석을 무시하는 습관에 빠지게 한다.
   7. 무서운 잡음
      - 때로는 과한 Javadocs로 잡음이다.
   8. 함수나 변수로 표현할 수 있다면 주석을 달지 마라
      - 주석이 필요하지 않도록 코드를 개선하는 게 좋다
   9. 위치를 표시하는 주석
      - 가독성만 낮춘다
      - 드물게 사용한다면 눈에 띄고 주의를 환기할 수도 있다. 반드시 필요할 때만 사용하자.
   10. 닫는 괄호에 다는 주석
       - 작고 캡슐화된 함수에는 필요 없다.
       - 주석을 달기보단, 함수를 줄이려고 시도하자.
   11. 공로를 돌리거나 저자를 표시하는 주석
       - 소스 관리 시스템에 저장하는 게 더 좋다
   12. 주석으로 처리한 코드
       - 다른 사람들이 지우기를 주저한다.
       - 쓸모 없는 코드만 쌓여가는 밉살스러운 관행
   13. HTML 주석
       - 혐오 그 자체 (ㅋㅋㅋ)
       - 편집기/IDE에서조차 읽기 어려운 주석이 HTML 주석
   14. 전역 정보
       - 근처에 있는 코드만 기술하라
       - 시스템의 전반적인 정보를 기술하지 마라
   15. 너무 많은 정보
       - 관련 없는 정보를 늘어놓지 말자
   16. 모호한 관계
       - 주석과 코드는 명백해야 한다
       - 무슨 소리인지 알아듣게 작섷아할
   17. 함수 헤더 (=함수 설명 주석)
       - 짧고 한 가지 기능만 있는, 이름이 명백한 함수가 더 좋다
   18. 비공개 코드에서 Javadocs

## 5. 형식 맞추기

- 코드 형식을 맞추고, 규칙을 정하고, 규칙을 착실히 따르자
- 팀으로 일한다면 팀이 합의해서 규칙을 정해야 한다
- 규칙을 자동으로 적용하는 도구를 활용하자

1. 형식을 맞추는 목적

   - 코드 형식 = `의사소통의 일환`
   - 오늘 구현한 기능은 다음 버전에서 바뀔것이다
   - 오늘 구현한 코드의 가독성은, 앞으로의 코드의 품질에 영향을 미친다.
     - 맨 처음 잡아놓은 구현 스타일, 가독성 수준 - 유지보수 용이성, 확장성에 계속 영향

### 적절한 행 길이를 유지하라

- 일반적으로 큰 파일보다 작은 파일이 이해하기 쉬움

2. 신문 기사처럼 작성하라

   - 신문 : 위에서 아래로 읽음
     - `표제` - `기사내용 요약` - `자세한 내용` 순서
   - 코드
     - 이름 : 간단하고 설명이 가능하게
     - 소스파일 첫 부분 : 고차원 개념, 알고리즘 설명
     - 내려갈수록 : 의도를 세세하게
     - 마지막 : 가장 저차원 함수, 세부 내역

3. 개념은 빈 행으로 분리하기

   - 행 묵음 = 완결된 생각 하나
   - `빈 행` = 새로운 개념의 시작
   - 생각 사이는 빈 행을 넣어 분리하자

4. 세로 밀집도
   - 세로 밀집도 = `연관성`
     - 밀접한 코드는 세로로 가까워야 한다
5. 수직 거리

   - 밀접한 개념은 세로로 가까이, 같은 파일에 둬야 한다
   - `protected` 변수를 피해야 하는 이유

   1. 변수 선언

      - 변수는 사용하는 위치에 최대한 가까이 선언
      - 루프를 제어하는 변수는 루프문 내부에 선언

   2. 인스턴스 변수

      - 인스턴스 변수는 클래스 맨 처음에 선언
      - 변수 간에 세로로 거리를 두지 않는다
        - 잘 알려진 위치에 모아두자

   3. 종속 함수

      - 호출하는 함수와, 호출 당하는 함수는 가까이 배치한다
        - 호출하는 함수를 먼저 배치한다
      - 모듈 전체의 가독성이 높아진다

   4. 개념적 유사성
      - 개념적인 친화도가 높을수록 가까이 배치한다
        - 함수 - 함수의 호출
        - 변수 - 변수 사용 함수

6. 세로 순서
   - 고차원에서 저차원으로 내려가는 순서
     - 호출하는 함수가 먼저, 호출되는 함수가 나중에 배치
     - 가장 중요한 개념을 먼저, 세세한 사항을 마지막에

### 가로 형식 맞추기

- 프로그래머는 명백하게 짧은 행을 선호한다 -> 짧은 행이 바람직
- 저자 : 120자 정도로 제한

7. 가로 공백과 밀집도

   - 가로로는 공백을 이용해 밀접한 개념/느슨한 개념 표현
   - 할당 연산자 강조, 함수와 인수 관계 강조, 연산자 우선순위 강조

8. 가로 정렬

   - 코드의 진짜 의도가 가려져서 유용하지 않음

9. 들여쓰기

   - 계층(outline)에서 각 수준은 이름을 선언하는 범위(scope) & 선언문과 실행문을 해석하는 범위
   - 범위로 이루어진 계층을 표현하기 위해 들여쓰기를 함

   - 들여쓰기를 무시하고 싶은 짧은 코드에서도 잘 들여쓰자

10. 가짜 범위
    - 빈 while문, for문에서 세미콜론은 새 행에다 들여써서 쓰자

### 팀 규칙

- 팀에 속한다면 - 팀 규칙을 따르자
- 좋은 소프트웨어 시스템 = 읽기 쉬운 문서로 이뤄진다
- 온갖 스타일을 뒤섞어 복잡하게 만들지 말자
